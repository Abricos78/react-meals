import React, { useEffect } from 'react'
import { connect } from 'react-redux'

import {
    getMealsByCategory,
    getMealsByName
} from 'reducers/meals'
import { getMeals, getLoading } from 'selectors'

function Meals(props) {
    const { meals, getMealsByCategory, getMealsByName, match } = props

    useEffect(() => {
        if (match.params.category) {
            getMealsByCategory(match.params.category)
        } else {
            getMealsByName(match.params.name)
        }
    }, [])
    
    return (
        <section>
            <h1>Hello Meals</h1>
        </section>
    )
}

let mapStateToProps = state => {
    return {
        meals: getMeals(state),
        loading: getLoading(state, 'meals')
    }
},
mapDispatchToProps = {
    getMealsByCategory,
    getMealsByName
}

export default connect(mapStateToProps, mapDispatchToProps)(Meals)
