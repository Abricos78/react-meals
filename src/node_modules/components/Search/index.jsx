import React from 'react'
import { connect } from 'react-redux'

import { getSearch } from 'selectors'
import { changeSearch } from 'reducers/categories'

function Search({search, changeSearch, history}) {

    const handleSubmit = event => {
        event.preventDefault()
        history.push(`/search/${search}`)
        changeSearch('')
    }

    return (
        <div className='row'>
            <form onSubmit={handleSubmit} className="col s12">
                <div className="row">
                    <div className="input-field col s10">
                        <input
                            value={search}
                            onChange={event => changeSearch(event.target.value)}
                            id="search"
                            type="text"
                            placeholder="Search Meals"
                        />
                    </div>
                    <button className="btn search">Search</button>
                </div>
            </form>
        </div>
    )
}

let mapStateToProps = state => {
    return {
        search: getSearch(state)
    }
},
mapDispatchToProps = {
    changeSearch
}

export default connect(mapStateToProps, mapDispatchToProps)(Search)
