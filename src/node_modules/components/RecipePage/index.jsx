import React, { useEffect } from 'react'
import { connect } from 'react-redux'

import { getRecipeById } from 'reducers/recipe'
import { getRecipe, getLoading } from 'selectors'
import Preloader from 'components/Preloader'
import Recipe from 'components/RecipePage/Recipe'

function RecipePage(props) {
    const {loading, recipe, getRecipeById, match, history} = props
    console.log(recipe)
    useEffect(() => getRecipeById(match.params.id), [])

    return (
        <section>
            <button onClick={history.goBack} className='btn purple lighten-1 left'>Go Back</button>
            { loading ?
                <Preloader />
            :
                <Recipe {...recipe}/>
            }
        </section>
    )
}

let mapStateToProps = state => {
    return {
        recipe: getRecipe(state),
        loading: getLoading(state, 'recipe')
    }
},
mapDispatchToProps = {
    getRecipeById
}

export default connect(mapStateToProps, mapDispatchToProps)(RecipePage)
